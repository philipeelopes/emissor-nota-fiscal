# ğŸ§¾ Emissor de Nota Fiscal â€“ Backend API

API REST desenvolvida em **Node.js + Express + MongoDB**, simulando um sistema real de **emissÃ£o de notas fiscais**, com foco em **boas prÃ¡ticas**, **arquitetura escalÃ¡vel**, **testes automatizados** e pronta para uso em **ambiente corporativo**.

Este projeto foi construÃ­do para **portfÃ³lio**, mas seguindo padrÃµes de um **sistema real utilizado por empresas**.

---

## ğŸš€ Tecnologias Utilizadas

* Node.js
* Express
* MongoDB + Mongoose
* Jest (testes automatizados)
* Supertest (testes de API)
* Nodemon (ambiente de desenvolvimento)
* Dotenv

---

## ğŸ“ Estrutura do Projeto

```
src/
â”œâ”€â”€ app.js
â”œâ”€â”€ server.js
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ notas.controller.js
â”‚   â””â”€â”€ relatorios.controller.js
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ notas.service.js
â”‚   â”œâ”€â”€ listarNotas.service.js
â”‚   â”œâ”€â”€ atualizarNota.service.js
â”‚   â”œâ”€â”€ cancelarNota.service.js
â”‚   â””â”€â”€ relatorios/
â”‚       â”œâ”€â”€ faturamento.service.js
â”‚       â”œâ”€â”€ mensal.service.js
â”‚       â””â”€â”€ status.service.js
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ NotaFiscal.js
â”‚   â””â”€â”€ Cliente.js
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ notas.routes.js
â”‚   â”œâ”€â”€ clientes.routes.js
â”‚   â””â”€â”€ relatorios.routes.js
â”œâ”€â”€ middlewares/
â”‚   â””â”€â”€ error.middleware.js
â””â”€â”€ tests/
```

### Healthcheck
GET /health


ğŸ“Œ **Arquitetura baseada em Controller + Service**, garantindo separaÃ§Ã£o de responsabilidades e escalabilidade.

---

## ğŸ“Œ Funcionalidades

### âœ”ï¸ Notas Fiscais

* Criar nota fiscal
* Listar notas com paginaÃ§Ã£o, ordenaÃ§Ã£o e filtros
* Buscar nota por ID
* Atualizar nota
* Cancelar nota (nÃ£o permite exclusÃ£o fÃ­sica)

### âœ”ï¸ RelatÃ³rios

* Faturamento mensal
* Faturamento por cliente
* Quantidade de notas emitidas x canceladas

---

## ğŸ§ª Testes Automatizados

O projeto possui **testes automatizados cobrindo regras de negÃ³cio, controllers e serviÃ§os**.

Executar testes:

```bash
npm test
```

Executar testes com cobertura:

```bash
npm test -- --coverage
```

ğŸ“Š Cobertura atual inclui:

* CriaÃ§Ã£o de notas
* AtualizaÃ§Ã£o
* Cancelamento
* Listagem com paginaÃ§Ã£o
* RelatÃ³rios

---

## âš™ï¸ ConfiguraÃ§Ã£o do Ambiente

### 1ï¸âƒ£ Clonar o repositÃ³rio

```bash
git clone <url-do-repositorio>
cd backend
```

### 2ï¸âƒ£ Instalar dependÃªncias

```bash
npm install
```

### 3ï¸âƒ£ Criar arquivo `.env`

```env
PORT=3333
MONGO_URI=mongodb://localhost:27017/emissor-nota
```

### 4ï¸âƒ£ Rodar o projeto

Modo desenvolvimento:

```bash
npm run dev
```

Modo produÃ§Ã£o:

```bash
npm start
```

---


## ğŸ³ Executando com Docker

O projeto estÃ¡ preparado para rodar via **Docker + Docker Compose**, incluindo MongoDB.

### Subir a aplicaÃ§Ã£o:
```bash
docker-compose up --build

---



## ğŸŒ Rotas Principais

### Notas

* `POST /notas` â†’ Criar nota
* `GET /notas` â†’ Listar notas
* `GET /notas/:id` â†’ Buscar nota por ID
* `PUT /notas/:id` â†’ Atualizar nota
* `PATCH /notas/:id/cancelar` â†’ Cancelar nota

### RelatÃ³rios

* `GET /relatorios/mensal`
* `GET /relatorios/por-cliente`
* `GET /relatorios/status`

---

## ğŸ“š DocumentaÃ§Ã£o da API (Swagger)

A API possui documentaÃ§Ã£o interativa gerada com **Swagger / OpenAPI**.

ApÃ³s rodar o projeto, acesse:

http://localhost:3333/docs

Nela Ã© possÃ­vel:
- Visualizar todas as rotas
- Testar endpoints diretamente pelo navegador
- Ver exemplos de payloads e respostas

---

## ğŸ§  Boas PrÃ¡ticas Aplicadas

* SeparaÃ§Ã£o de responsabilidades (Controller / Service)
* Regras de negÃ³cio isoladas
* Testes automatizados desde o inÃ­cio
* CÃ³digo preparado para escalar
* PadrÃ£o REST
* Tratamento de erros

---


## ğŸ‘¨â€ğŸ’» Autor

Projeto desenvolvido por **Philipe L**

ğŸ”— Backend focado em aprendizado avanÃ§ado, arquitetura limpa e padrÃµes profissionais.

---

ğŸš€ **Projeto pronto para uso real e apresentaÃ§Ã£o em portfÃ³lio**
